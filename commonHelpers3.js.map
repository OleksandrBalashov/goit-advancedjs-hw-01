{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import debounce from 'lodash.debounce';\n\nconst KEY_STORAGE = 'feedback-form-state';\n\nconst refs = {\n  form: document.querySelector('.feedback-form'),\n  input: document.querySelector('input[name=\"email\"]'),\n  textarea: document.querySelector('textarea[name=\"message\"]'),\n  submit: document.querySelector('button[type=\"submit\"]'),\n};\n\nrefs.submit.disabled = true;\n\nrefs.form.addEventListener('input', debounce(handleInput, 500));\nrefs.form.addEventListener('submit', handleSubmit);\n\nconst data = JSON.parse(localStorage.getItem(KEY_STORAGE)) || {};\n\nif (!!Object.keys(data).length) {\n  refs.input.value = data.email;\n  refs.textarea.value = data.message;\n}\n\nfunction handleInput() {\n  const formData = new FormData(refs.form);\n\n  formData.forEach((key, name) => {\n    data[name] = key;\n  });\n\n  localStorage.setItem(KEY_STORAGE, JSON.stringify(data));\n\n  if (data.email && data.message) refs.submit.disabled = false;\n}\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n\n  console.log(data);\n  localStorage.removeItem(KEY_STORAGE, JSON);\n  refs.form.reset();\n  refs.submit.disabled = true;\n}\n"],"names":["KEY_STORAGE","refs","debounce","handleInput","handleSubmit","data","key","name","event"],"mappings":"wIAEA,MAAMA,EAAc,sBAEdC,EAAO,CACX,KAAM,SAAS,cAAc,gBAAgB,EAC7C,MAAO,SAAS,cAAc,qBAAqB,EACnD,SAAU,SAAS,cAAc,0BAA0B,EAC3D,OAAQ,SAAS,cAAc,uBAAuB,CACxD,EAEAA,EAAK,OAAO,SAAW,GAEvBA,EAAK,KAAK,iBAAiB,QAASC,EAASC,EAAa,GAAG,CAAC,EAC9DF,EAAK,KAAK,iBAAiB,SAAUG,CAAY,EAEjD,MAAMC,EAAO,KAAK,MAAM,aAAa,QAAQL,CAAW,CAAC,GAAK,GAExD,OAAO,KAAKK,CAAI,EAAE,SACtBJ,EAAK,MAAM,MAAQI,EAAK,MACxBJ,EAAK,SAAS,MAAQI,EAAK,SAG7B,SAASF,GAAc,CACJ,IAAI,SAASF,EAAK,IAAI,EAE9B,QAAQ,CAACK,EAAKC,IAAS,CAC9BF,EAAKE,GAAQD,CACjB,CAAG,EAED,aAAa,QAAQN,EAAa,KAAK,UAAUK,CAAI,CAAC,EAElDA,EAAK,OAASA,EAAK,UAASJ,EAAK,OAAO,SAAW,GACzD,CAEA,SAASG,EAAaI,EAAO,CAC3BA,EAAM,eAAc,EAEpB,QAAQ,IAAIH,CAAI,EAChB,aAAa,WAAWL,EAAa,IAAI,EACzCC,EAAK,KAAK,QACVA,EAAK,OAAO,SAAW,EACzB"}