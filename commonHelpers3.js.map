{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import debounce from 'lodash.debounce';\n\nconst KEY_STORAGE = 'feedback-form-state';\n\nconst refs = {\n  form: document.querySelector('.feedback-form'),\n  input: document.querySelector('input[name=\"email\"]'),\n  textarea: document.querySelector('textarea[name=\"message\"]'),\n};\n\nrefs.form.addEventListener('input', debounce(handleInput, 500));\nrefs.form.addEventListener('submit', handleSubmit);\n\nconst dataStorage = JSON.parse(localStorage.getItem(KEY_STORAGE));\n\nif (!!dataStorage) {\n  refs.input.value = dataStorage.email;\n  refs.textarea.value = dataStorage.message;\n}\n\nconst data = {};\n\nfunction handleInput() {\n  const formData = new FormData(refs.form);\n\n  formData.forEach((key, name) => {\n    data[name] = key;\n  });\n\n  localStorage.setItem(KEY_STORAGE, JSON.stringify(data));\n}\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n\n  console.log(dataStorage || data);\n  localStorage.removeItem(KEY_STORAGE, JSON);\n  refs.form.reset();\n}\n"],"names":["KEY_STORAGE","refs","debounce","handleInput","handleSubmit","dataStorage","data","key","name","event"],"mappings":"wIAEA,MAAMA,EAAc,sBAEdC,EAAO,CACX,KAAM,SAAS,cAAc,gBAAgB,EAC7C,MAAO,SAAS,cAAc,qBAAqB,EACnD,SAAU,SAAS,cAAc,0BAA0B,CAC7D,EAEAA,EAAK,KAAK,iBAAiB,QAASC,EAASC,EAAa,GAAG,CAAC,EAC9DF,EAAK,KAAK,iBAAiB,SAAUG,CAAY,EAEjD,MAAMC,EAAc,KAAK,MAAM,aAAa,QAAQL,CAAW,CAAC,EAE1DK,IACJJ,EAAK,MAAM,MAAQI,EAAY,MAC/BJ,EAAK,SAAS,MAAQI,EAAY,SAGpC,MAAMC,EAAO,CAAA,EAEb,SAASH,GAAc,CACJ,IAAI,SAASF,EAAK,IAAI,EAE9B,QAAQ,CAACM,EAAKC,IAAS,CAC9BF,EAAKE,GAAQD,CACjB,CAAG,EAED,aAAa,QAAQP,EAAa,KAAK,UAAUM,CAAI,CAAC,CACxD,CAEA,SAASF,EAAaK,EAAO,CAC3BA,EAAM,eAAc,EAEpB,QAAQ,IAAIJ,GAAeC,CAAI,EAC/B,aAAa,WAAWN,EAAa,IAAI,EACzCC,EAAK,KAAK,OACZ"}